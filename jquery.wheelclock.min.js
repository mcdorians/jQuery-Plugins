/* 
 * wheelclock plugin
 * 
 * Licensed under the MIT license.
 * Copyright 2012 Dorian Knoblauch
 */
(function(b){var d={init:function(a){return this.each(function(){var f=b(this),c=f.data("wheelclock"),c=b.extend({h:0,m:0,s:0,wheels:{},timer:t=null,mode:"clock",seconds:!0,running:!0,clockpixelsize:200,speed:500,wheeltemplate:'<div class="wc_wheel"></div>',wheelsettemplate:'<div class="wc_wheelSet"><div class="wc_container wc_size wc_border wc_round"><div class="wc_frame wc_round wc_scale"></div></div></div>'},a);b(this).data("wheelclock",c);c=f.data("wheelclock");d.setupClock.call(this,c.seconds);
d.reset.call(this);var e=b(this);c.timer=setInterval(function(){e.data("wheelclock").running&&d.addSec(e)},1E3)})},destroy:function(){var a=b(this).data("wheelclock").timer;clearInterval(a);return this.each(function(){b(this).html("");b(this).data=null})},reset:function(){if("clock"==b(this).data("wheelclock").mode)d.setTime.call(this);else{var a=b(this).data("wheelclock");a.h=0;a.m=0;a.s=0;d.rollToTime.call(this,0,0,0)}},toggle:function(){b(this).data("wheelclock").running=!b(this).data("wheelclock").running},
setTime:function(){var a=b(this).data("wheelclock"),f=new Date;d.rollToTime.call(this,f.getHours(),f.getMinutes(),f.getSeconds());a.h=f.getHours();a.m=f.getMinutes();a.s=f.getSeconds()},buildWheelDom:function(a,f,c){var e=b(b(this).data("wheelclock").wheeltemplate);b(e).addClass("wc_wheel"+c).attr("id",a);for(var c="",d=0;d<=f;d++)c+=d+"<br/>";b(e).html(c+"0");return b(this).data("wheelclock").wheels[a].dom=e},buildWheelSetDom:function(a,f,c,e,i){var h=b(b(this).data("wheelclock").wheelsettemplate);
b(".wc_container",h).append(d.buildWheelDom.call(this,a,f,1));b(".wc_container",h).append(b('<div class="wc_split"><div class="wc_fade"></div></div>'));b(".wc_container",h).append(d.buildWheelDom.call(this,c,e,2));b(h).append(b('<span class="wc_caption"></span>').text(i));return h},buildDom:function(a,f){for(var c=0;c<a.length;c+=2){var e={start:0,dom:null};e.num=a[c];var i={start:0,dom:null};i.num=a[c+1];b(this).data("wheelclock").wheels["wheel"+c]=e;b(this).data("wheelclock").wheels["wheel"+(c+
1)]=i;b(this).append(d.buildWheelSetDom.call(this,"wheel"+c,e.num,"wheel"+(c+1),i.num,f[c/2]))}},setupClock:function(a){a?d.buildDom.call(this,[2,9,5,9,5,9],["HOUR","MIN","SEC"]):d.buildDom.call(this,[2,9,5,9],["HOUR","MIN"]);b(this).data("wheelclock").clockpixelsize=parseInt(b(".wc_size:last").css("height"))},addSec:function(a){var b=a.data("wheelclock"),c=b.s,e=b.m,i=b.h,h=b.clockpixelsize;c++;if(60==c){c=0;e++;if(60==e){e=0;i++;24==i&&(i=0);if(0==i%10){var g=b.wheels.wheel0;a.append(d.rollWheel.call(a,
g,(g.num+1)*h))}g=b.wheels.wheel1;a.append(d.rollWheel.call(a,g,(g.num+1)*h))}0==e%10&&(g=b.wheels.wheel2,a.append(d.rollWheel.call(a,g,(g.num+1)*h)));g=b.wheels.wheel3;a.append(d.rollWheel.call(a,g,(g.num+1)*h))}b.seconds&&(0==c%10&&(g=b.wheels.wheel4,a.append(d.rollWheel.call(a,g,(g.num+1)*h))),g=b.wheels.wheel5,a.append(d.rollWheel.call(a,g,(g.num+1)*h)));b.s=c;b.m=e;b.h=i},rollWheel:function(a,d){a.start>=d&&(a.dom.animate({top:"0px"},0,"linear"),a.start=0);a.start+=b(this).data("wheelclock").clockpixelsize;
a.dom.animate({top:"-"+a.start+"px"},b(this).data("wheelclock").speed,"linear")},rollToTime_helper:function(a,f,c){var e=b(this).data("wheelclock").clockpixelsize;a.start=e*(Math.floor(c/10)-1);f.start=e*(c%10-1);d.rollWheel.call(this,a,2E3);d.rollWheel.call(this,f,2E3)},rollToTime:function(a,f,c){var e=b(this).data("wheelclock").wheels,i=e.wheel0,h=e.wheel1;d.rollToTime_helper.call(this,e.wheel2,e.wheel3,f);d.rollToTime_helper.call(this,i,h,a);b(this).data("wheelclock").seconds&&d.rollToTime_helper.call(this,
e.wheel4,e.wheel5,c)}};b.fn.wheelclock=function(a){if(d[a]&&("destroy"==a||"reset"==a||"toggle"==a))return d[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return d.init.apply(this,arguments);b.error("Method "+a+" does not exist on jQuery.wheelclock")}})(jQuery);